//THIS PLUGIN PREVENTS DELETION OF BOOTSTRAP ELEMENTS WHICH HAS DEFINED IN BOOTSTRAPELEMENTS LIST
// NEEDS IMPROVEMENT AS IT DOES NOT PREVENT TINYMCE DELETING EMPTY DIVS (but there are built in solutions for this)

tinymce.PluginManager.add('preventdelete', function(ed, link) {
    
    var lastContainer;
    //List of bootstrap elements not to delete
    var bootstrapElements = ["preventdelete","row","col-sm-2","col-sm-4","col-sm-5","col-sm-6","col-sm-7","col-sm-8","col-sm-10"];
	

    ed.on('keydown', function(evt) {

        var node            = ed.selection.getNode();
        var range           = ed.selection.getRng();
        var startOffset     = range.startOffset;
        var currentWrapper  = range.endContainer.parentElement.className;

          // if delete Keys pressed
          if (evt.keyCode == 8 || evt.keyCode == 46){
             if (startOffset == "0" && bootstrapElements.indexOf(lastContainer)>-1 ){
				
                evt.preventDefault();
                evt.stopPropagation();
                return false;
             }
             

          }
        
        lastContainer = currentWrapper;
            

    });
    


});

